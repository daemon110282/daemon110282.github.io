# Отказоустойчивость Fault tolerance

- [Отказоустойчивость Fault tolerance](#отказоустойчивость-fault-tolerance)
  - [Факторы риска](#факторы-риска)
  - [Методы инфраструктуры, физической архитектуры](#методы-инфраструктуры-физической-архитектуры)
  - [Методы разработки](#методы-разработки)


Отказоустойчивость — это способность системы продолжать полноценно работать при выходе из строя отдельных компонентов — серверов или каналов связи, сбоев на уровне отдельных модулей системы и т.д.

* CAP теорема - концепции распределённости — расщепление распределённой системы на несколько изолированных секций не приводит к некорректности отклика от каждой из секций:
  * согласованность (consistency)
  * доступность (availability)
  * устойчивость к разделению (англ. partition tolerance)
  * Вы хотите консистентность или доступность в случае инцидента?

## Факторы риска

  * Сбой электропитания
  * Сбои Сервера, ос
  * Ошибки софта
  * Выход из строя канала интернет
  * умышленное или случайное изменение данных в базе данных
  * Ddos атаки

##  Методы инфраструктуры, физической архитектуры

  * исключение единой точки отказа — это либо решения с «горячей заменой»
  * резервирование, дублирование, кластеры, либо горизонтальное масштабирование.
  * Прокси, файервол, капча
  * [Балансировка](load.balancing.md)
  * api management
  * Установка лимитов запросов rate limits, тайм-аут
  * Dev ops ci/cd: 
    * [docker](../../technology/docker.md)
    * [kubernetes](../../technology/k8s.md)
    * jenkins
    * авто распределенный конфиг etcd
    * кеш [redis](../../technology/redis.md)
  * системы мониторинга - аптайм доступность сервиса, выраженная в процентах
  * ИБП, генератор электричества, охлаждение серверов
  * DB: Master-slave : Logshipping, репликации, кластер, Горизонтальное шардирование данных
  * [Распределенные файловые системы](../../technology/dfs.md)
  * Бэкапы, логи

## Методы разработки

  [Design for failure](../pattern/pattern.failure.md)
  * распределенная архитектура\модульный монолит
  * Микросервисы слабая связность, изоляция сбоев  * 
  * stateless
  * Health check
  * [CQRS](../pattern/pattern.cqrs.md) - command query request segregation
  * Асинхронная обработка - Брокер очереди, воркеры, буферы входного потока данных
  * Git, rollback, миграции бд
  * graceful shutdown: при выключении они дожидаются полного завершения текущей задачи, будь это http-запрос или какая-нибудь служебная задача.
  * [Паттерн Transactional outbox\Application events](https://microservices.io/patterns/data/transactional-outbox.html)
    * https://itnext.io/the-outbox-pattern-in-event-driven-asp-net-core-microservice-architectures-10b8d9923885"
