# Site Reliability Engineering (SRE) Надежность

Обеспечение эксплуатационной __надежности системы__, набор инженерных практик, поддерживающих надежную и __безотказную работу__ приложений в настоящем и будущем, с учетом __требуемой масштабируемости__ и внезапных форс-мажоров.

## Зачем

- Цель инженера по SRE — обеспечить __надёжную работу системы__
- Определяют, что такое [надёжность Reliability системы](../arch/arch.ability.md), договариваются о показателях и вырабатывают стандарты действий в случае проблем
  - стабильность [resilience](../arch/ability/resilience.md)
  - доступность [availability](../arch/ability/availability.md)
- Показатели
  - SLI - Service Level Indicator - индикаторы уровня обслуживания - __метрики__
  - доступности вырабатываются вместе с продакт-оунером и закрепляются в соглашении о __целевом уровне__ обслуживания (метрик) — __Service-Level Objective (SLO)__ по определенным SLI  
  - Service Level Agreement (SLA) - обязанности компании перед потребителями закрепляются. Это соглашение описывает работоспособность всего сервиса и штрафы за превышение времени простоя или другие нарушения
    - описывает ИТ-услугу
    - документирует целевые показатели качества услуги
    - указывает зоны ответственности сторон
    - заключается между Бизнес-владельцем и поставщиком ИТ-услуги

Надежность зависит от частоты и продолжительности __простоев__. [Она измеряется](https://habr.com/ru/companies/itsumma/articles/435662/) через:

- Частоту простоя, или обратную от нее: __MTTF (mean time to failure, среднее время безотказной работы)__
- Продолжительность простоя, __MTTR (mean time to repair, среднее время восстановления)__. Продолжительность простоя определяется временем пользователя: от начала неисправности до возобновления [нормальной работы сервиса](https://habr.com/ru/companies/slurm/articles/525176/).
  - Observability напрямую связана с MTTR. __Чем выше Observability сервиса, тем проще определить ошибку__, исправить и автоматизировать, и тем ниже MTTR.
- Надежность определяется как MTTF/(MTTF+MTTR)

## ИТ услуга

- ИТ-услуга - услуга, предоставляемая поставщиком ИТ-услуг. ИТ-услуга включает в себя информационные технологии, процессы и людей. ИТ-услуга, ориентированная на Заказчика, непосредственно поддерживает бизнес-процессы одного или более Заказчиков.
- Бизнес-владелец - это основной заказчик услуги со стороны Бизнеса, использующий ее ценность для получения конечного результата.
- ИТ-владелец - это лицо, ответственное за управление ИТ-услугой в течение ее жизненного цикла, начиная с проектирования и заканчивая выводом из эксплуатации.
- Пользователь - лицо, использующее ИТ-услугу для выполнения конкретной функции или получения результатов ее функционирования.
- Операция по ИТ-услуге - любая предопределенная деятельность или транзакция

## SLI

Что мониторить:

- Client-side monitoring (Sentry и тп): Error, Performance
- [Network monitoring](https://cloud.google.com/blog/topics/partners/using-sentry-to-monitor-web-and-mobile-apps): Latency, Throughput, Utilization
  - CDN
  - Load Balancer
  - Router
  - DNS
  - VPCs
- Server-side monitoring
  - system
  - application

## Оповещения

- [Бот, действия, ответственные](https://habr.com/ru/companies/oleg-bunin/articles/481874/)

## Технологии

- [Prometheus + Grafana. Настраиваем 4 golden signals](https://www.youtube.com/watch?v=Q_fKb0nrfCg&ab_channel=Слёрм)
  - [Demo project](https://github.com/s-buhar0v/4-golden-signals-demo)
- Стабильность [Sentry](https://vc.ru/dev/833250-kak-s-pomoshchyu-sentry-nahodit-i-bystro-ustranyat-oshibki)